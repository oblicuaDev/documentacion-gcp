"use strict";(globalThis.webpackChunkbilly_gcp=globalThis.webpackChunkbilly_gcp||[]).push([[8671],{6753:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>d,default:()=>x,frontMatter:()=>r,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"seguridad-iam","title":"\ud83d\udee1\ufe0f Seguridad y IAM","description":"La seguridad en Billy GCP se basa en el Principio de M\xednimo Privilegio, garantizando que cada componente (Cloud Functions, Cloud Workflows) solo tenga los permisos estrictamente necesarios para su tarea.","source":"@site/docs/seguridad-iam.md","sourceDirName":".","slug":"/seguridad-iam","permalink":"/documentacion-gcp/docs/seguridad-iam","draft":false,"unlisted":false,"editUrl":"https://github.com/oblicuaDev/documentacion-gcp/tree/main/docs/seguridad-iam.md","tags":[],"version":"current","frontMatter":{"id":"seguridad-iam","title":"\ud83d\udee1\ufe0f Seguridad y IAM","sidebar_label":"Seguridad (IAM)"},"sidebar":"billyGcpSidebar","previous":{"title":"Secret Manager","permalink":"/documentacion-gcp/docs/secret-manager"}}');var i=s(4848),n=s(8453);const r={id:"seguridad-iam",title:"\ud83d\udee1\ufe0f Seguridad y IAM",sidebar_label:"Seguridad (IAM)"},d="Seguridad y Gesti\xf3n de Identidad y Acceso (IAM)",c={},o=[{value:"1. Cuentas de Servicio Principales",id:"1-cuentas-de-servicio-principales",level:2},{value:"2. Roles y Permisos Cr\xedticos",id:"2-roles-y-permisos-cr\xedticos",level:2},{value:"A. Orquestaci\xf3n y Control de Flujo",id:"a-orquestaci\xf3n-y-control-de-flujo",level:3},{value:"B. Acceso a Datos y Secretos",id:"b-acceso-a-datos-y-secretos",level:3},{value:"3. Seguridad de Acceso a Endpoints (Cloud Run)",id:"3-seguridad-de-acceso-a-endpoints-cloud-run",level:2}];function a(e){const t={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"seguridad-y-gesti\xf3n-de-identidad-y-acceso-iam",children:"Seguridad y Gesti\xf3n de Identidad y Acceso (IAM)"})}),"\n",(0,i.jsxs)(t.p,{children:["La seguridad en Billy GCP se basa en el ",(0,i.jsx)(t.strong,{children:"Principio de M\xednimo Privilegio"}),", garantizando que cada componente (Cloud Functions, Cloud Workflows) solo tenga los permisos estrictamente necesarios para su tarea."]}),"\n",(0,i.jsx)(t.h2,{id:"1-cuentas-de-servicio-principales",children:"1. Cuentas de Servicio Principales"}),"\n",(0,i.jsx)(t.p,{children:"El flujo central de Billy est\xe1 orquestado por la Cuenta de Servicio asociada al Cloud Workflow, la cual asume los roles m\xe1s cr\xedticos."}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Cuenta de Servicio (SA)"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Rol Asignado (Ver imagen)"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Uso Principal"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.code,{children:"985640295677-compute@developer.gserviceaccount.com"})})," (Default Compute Engine SA)"]}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,i.jsx)(t.strong,{children:"Editor"})," (Con acceso adicional a Secret Manager)"]}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Es la ",(0,i.jsx)(t.strong,{children:"identidad central"})," utilizada por el ",(0,i.jsx)(t.code,{children:"Billy-workflow"}),". Posee amplios permisos (",(0,i.jsx)(t.code,{children:"Editor"}),") para invocar todas las funciones Cloud Run y manejar secretos."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.code,{children:"billy-473802@appspot.gserviceaccount.com"})})," (App Engine Default SA)"]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.strong,{children:"Editor"})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Usada hist\xf3ricamente, o como respaldo para servicios como App Engine. Actualmente la mayor\xeda de los servicios usan la Default Compute SA."})]})]})]}),"\n",(0,i.jsx)(t.h2,{id:"2-roles-y-permisos-cr\xedticos",children:"2. Roles y Permisos Cr\xedticos"}),"\n",(0,i.jsxs)(t.p,{children:["Aunque las cuentas tienen el rol amplio de ",(0,i.jsx)(t.code,{children:"Editor"}),", los permisos ",(0,i.jsx)(t.strong,{children:"funcionales m\xednimos requeridos"})," para que la arquitectura de mensajer\xeda trabaje son:"]}),"\n",(0,i.jsx)(t.h3,{id:"a-orquestaci\xf3n-y-control-de-flujo",children:"A. Orquestaci\xf3n y Control de Flujo"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Componente"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Rol Funcional Requerido"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Prop\xf3sito"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.code,{children:"ingest-task-from-billy"})})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.code,{children:"Workflows Invoker"})})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Permite que esta funci\xf3n inicie la ejecuci\xf3n del ",(0,i.jsx)(t.code,{children:"Billy-workflow"}),"."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.strong,{children:"Default Compute SA"})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.code,{children:"Cloud Run Invoker"})})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Permite que el ",(0,i.jsx)(t.code,{children:"Billy-workflow"})," invoque a las funciones privadas (",(0,i.jsx)(t.code,{children:"get-data-from-*"})," y ",(0,i.jsx)(t.code,{children:"process-and-send-message"}),")."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.strong,{children:"Default Compute SA"})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.code,{children:"Workflows Editor"})})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Permite gestionar y ejecutar el ",(0,i.jsx)(t.code,{children:"Billy-workflow"}),"."]})]})]})]}),"\n",(0,i.jsx)(t.h3,{id:"b-acceso-a-datos-y-secretos",children:"B. Acceso a Datos y Secretos"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Componente"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Rol Funcional Requerido"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Prop\xf3sito"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.strong,{children:"Default Compute SA"})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.code,{children:"Secret Manager Secret Accessor"})})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,i.jsx)(t.strong,{children:"Permiso cr\xedtico"}),". Permite al ",(0,i.jsx)(t.em,{children:"workflow"})," leer los valores de las claves de API de terceros y credenciales de cliente."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.strong,{children:"Default Compute SA"})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.code,{children:"Service Usage Consumer"})})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Permite al ",(0,i.jsx)(t.em,{children:"workflow"})," consumir las APIs de GCP (como Sheets API) al ejecutar los adaptadores de datos."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.code,{children:"save-user-credentials"})})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.code,{children:"Secret Manager Secret Admin"})})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,i.jsx)(t.strong,{children:"Permiso cr\xedtico para el alta de secretos"}),". Permite crear nuevos secretos (credenciales de cliente) y a\xf1adir nuevas versiones."]})]})]})]}),"\n",(0,i.jsx)(t.h2,{id:"3-seguridad-de-acceso-a-endpoints-cloud-run",children:"3. Seguridad de Acceso a Endpoints (Cloud Run)"}),"\n",(0,i.jsxs)(t.p,{children:["La autenticaci\xf3n de los ",(0,i.jsx)(t.em,{children:"endpoints"})," est\xe1 dise\xf1ada para proteger el flujo de datos y separar los puntos de acceso p\xfablicos de los privados."]}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Funci\xf3n (Cloud Run)"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Configuraci\xf3n de Autenticaci\xf3n"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Mecanismo de Seguridad"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.code,{children:"ingest-task-from-billy"})})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.strong,{children:"Acceso p\xfablico"})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Protegido por validaci\xf3n CORS (solo permite el origen de la UI de Oblicua)."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.code,{children:"save-user-credentials"})})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.strong,{children:"Acceso p\xfablico"})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Protegido por validaci\xf3n CORS. En producci\xf3n, debe llevar validaci\xf3n de Token (JWT) para verificar la identidad del usuario."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,i.jsx)(t.strong,{children:"Adaptadores de Datos"})," (",(0,i.jsx)(t.code,{children:"get-data-from-*"}),")"]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.strong,{children:"Necesita autenticaci\xf3n"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Solo pueden ser invocados por el ",(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.code,{children:"Billy-workflow"})})," que se autentica usando la Default Compute Service Account."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.code,{children:"process-and-send-message"})})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.strong,{children:"Necesita autenticaci\xf3n"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Solo invocado por el ",(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.code,{children:"Billy-workflow"})}),"."]})]})]})]})]})}function x(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>r,x:()=>d});var l=s(6540);const i={},n=l.createContext(i);function r(e){const t=l.useContext(n);return l.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),l.createElement(n.Provider,{value:t},e.children)}}}]);